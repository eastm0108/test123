(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b95a509"],{"25f0":function(t,e,a){"use strict";var r=a("6eeb"),n=a("825a"),i=a("d039"),s=a("ad6d"),c="toString",o=RegExp.prototype,l=o[c],u=i((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=c;(u||h)&&r(RegExp.prototype,c,(function(){var t=n(this),e=String(t.source),a=t.flags,r=String(void 0===a&&t instanceof RegExp&&!("flags"in o)?s.call(t):a);return"/"+e+"/"+r}),{unsafe:!0})},"3ca3":function(t,e,a){"use strict";var r=a("6547").charAt,n=a("69f3"),i=a("7dd0"),s="String Iterator",c=n.set,o=n.getterFor(s);i(String,"String",(function(t){c(this,{type:s,string:String(t),index:0})}),(function(){var t,e=o(this),a=e.string,n=e.index;return n>=a.length?{value:void 0,done:!0}:(t=r(a,n),e.index+=t.length,{value:t,done:!1})}))},"4df4":function(t,e,a){"use strict";var r=a("0366"),n=a("7b0b"),i=a("9bdd"),s=a("e95a"),c=a("50c4"),o=a("8418"),l=a("35a1");t.exports=function(t){var e,a,u,h,d,f,p=n(t),b="function"==typeof this?this:Array,g=arguments.length,v=g>1?arguments[1]:void 0,m=void 0!==v,y=l(p),_=0;if(m&&(v=r(v,g>2?arguments[2]:void 0,2)),void 0==y||b==Array&&s(y))for(e=c(p.length),a=new b(e);e>_;_++)f=m?v(p[_],_):p[_],o(a,_,f);else for(h=y.call(p),d=h.next,a=new b;!(u=d.call(h)).done;_++)f=m?i(h,v,[u.value,_],!0):u.value,o(a,_,f);return a.length=_,a}},a630:function(t,e,a){var r=a("23e7"),n=a("4df4"),i=a("1c7e"),s=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:s},{from:n})},b08f:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog branchDetailDialog",attrs:{left:"",top:"2vh",title:t.branchDetails.name+"的詳細資料","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"before-close":t.close,"lock-scroll":!0,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"btnArea"},[a("el-date-picker",{staticClass:"search",attrs:{type:"daterange","range-separator":"至","start-placeholder":"開始日期","end-placeholder":"結束日期"},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}}),a("el-button",{staticClass:"btnArea__searchbtn",on:{click:function(e){return t.getBranchChart()}}},[t._v("查詢")])],1),t.hasLineChart?a("div",{staticClass:"lineChartData"},[a("ve-line",{attrs:{data:t.chartData,settings:t.chartSettings,textStyle:t.textStyle}})],1):a("div",{staticClass:"noLineChartData"},[a("p",[t._v(" 沒有折線圖資料 ")])]),a("div",{staticClass:"pieArea"},[t.hasPie1Chart?a("div",{staticClass:"pieArea__pieItem pieChartData"},[a("h3",{staticClass:"pieArea__pieItem__title"},[t._v(t._s(t.pieData1.chartName))]),a("div",{staticClass:"pieArea__pieItem__info"},t._l(t.pieData1.rows,(function(e,r){return a("p",{key:r+"id"},[t._v(" "+t._s(e["分類"]+":"+e["金額"]+t.pieData1.unit)+" ")])})),0),a("ve-pie",{staticClass:"pieArea__pieItem__chart",attrs:{settings:t.chartPieSettings,legend:{show:!1},width:"400px",height:"320px",data:t.pieData1,textStyle:t.textStyle}})],1):a("div",{staticClass:"noPie1ChartData"},[a("p",[t._v(" 沒有圓餅圖資料 ")])]),t.hasPie2Chart?a("div",{staticClass:"pieArea__pieItem pieChartData"},[a("h3",{staticClass:"pieArea__pieItem__title"},[t._v(t._s(t.pieData2.chartName))]),a("div",{staticClass:"pieArea__pieItem__info"},t._l(t.pieData2.rows,(function(e,r){return a("p",{key:r+"id"},[t._v(" "+t._s(e["分類"]+":"+e["金額"]+t.pieData2.unit)+" ")])})),0),a("ve-pie",{staticClass:"pieArea__pieItem__chart",attrs:{settings:t.chartPieSettings,legend:{show:!1},width:"400px",height:"320px",data:t.pieData2,textStyle:t.textStyle}})],1):a("div",{staticClass:"noPie2ChartData"},[a("p",[t._v(" 沒有圓餅圖資料 ")])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-dialog__footer__btn",on:{click:function(e){return t.close()}}},[t._v("確 定")])],1),0!==t.index?a("svg-icon",{staticClass:"branchDetailDialog__arrow branchDetailDialog__arrow--left",attrs:{"icon-class":"triangular"},on:{click:function(e){return t.pageClick("pre")}}}):t._e(),t.index+1!=t.listLength?a("svg-icon",{staticClass:"branchDetailDialog__arrow branchDetailDialog__arrow--right",attrs:{"icon-class":"triangular"},on:{click:function(e){return t.pageClick("next")}}}):t._e()],1)},n=[],i=(a("4160"),a("d81d"),a("b0c0"),a("b64b"),a("d3b7"),a("159b"),a("ddb0"),a("b85c")),s=(a("96cf"),a("1da1")),c=(a("b00c"),a("c968")),o={props:{registed:{type:String,default:"dashboard"},branchDetails:{type:Object,default:function(){}}},data:function(){return{dialogVisible:!1,chartPieSettings:{label:{fontSize:13}},chartData:{columns:[],rows:[],desc:"",chartName:"",unit:""},pieData1:{columns:["分類","金額"],rows:[{"分類":"","金額":0}],desc:"",chartName:"",unit:""},pieData2:{columns:["分類","金額"],rows:[{"分類":"","金額":0}],desc:"",chartName:"",unit:""},chartSettings:{yAxisName:["金額"],area:!0},textStyle:{fontSize:16},searchValue:[Object(c["f"])(),Object(c["g"])()],hasLineChart:!1,hasPie1Chart:!1,hasPie2Chart:!1}},computed:{index:function(){var t=this,e=null;switch(t.registed){case"dashboard":e=this.$store.state.navbarInfo.dashboard.index;break;case"branchManagement":e=this.$store.state.navbarInfo.branchManagement.index;break;default:break}return e},listLength:function(){var t=this,e=null;switch(t.registed){case"dashboard":e=this.$store.state.navbarInfo.dashboard.list.length;break;case"branchManagement":e=this.$store.state.navbarInfo.branchManagement.list.length;break;default:break}return e}},methods:{opend:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,r=null!=a.branchDetails.anilyze&&a.branchDetails.anilyze.length>0,r){e.next=6;break}return a.clearIndex(),a.dialogVisible=!1,e.abrupt("return",!1);case 6:return a.clearChart(),e.next=9,a.getBranchChart();case 9:case"end":return e.stop()}}),e)})))()},getBranchChart:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s,o,l,u,h,d,f,p,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,null!=a.searchValue){e.next=4;break}return a.sentMessage("時間選擇錯誤","error"),e.abrupt("return",!1);case 4:if(r=null==a.searchValue[0]?null:a.searchValue[0],n=null==a.searchValue[1]?null:a.searchValue[1],null!=r&&null!=n){e.next=9;break}return a.sentMessage("時間選擇錯誤","error"),e.abrupt("return",!1);case 9:a.clearChart(),e.prev=10,t.$store.dispatch("app/toggleLoading",!0),s=a.branchDetails.anilyze,o=[],l={sd:Object(c["c"])(r),ed:Object(c["c"])(n)},u=Object(i["a"])(s),e.prev=16,u.s();case 18:if((h=u.n()).done){e.next=36;break}d=h.value,e.t0=d.type,e.next="pie"===e.t0?23:"line"===e.t0?28:33;break;case 23:return e.next=25,Object(c["e"])(d.url,l);case 25:return f=e.sent,o.push({type:"pie",data:f}),e.abrupt("break",34);case 28:return e.next=30,Object(c["e"])(d.url,l);case 30:return p=e.sent,o.push({type:"chart",data:p}),e.abrupt("break",34);case 33:return e.abrupt("break",34);case 34:e.next=18;break;case 36:e.next=41;break;case 38:e.prev=38,e.t1=e["catch"](16),u.e(e.t1);case 41:return e.prev=41,u.f(),e.finish(41);case 44:if(0!==Object.keys(a.$store.state.user.pcStateStyle).length){e.next=47;break}return e.next=47,a.$store.dispatch("user/getConfig");case 47:b=1,o.forEach((function(t,e){if(null==t.data.values&&null==t.data.columns)return"pie"===t.type&&(1===b&&(a.hasPie1Chart=!1,b+=1),2===b&&(a.hasPie2Chart=!1)),void("chart"===t.type&&(a.hasLineChart=!1));switch(t.type){case"chart":a.hasLineChart=!0,a.chartSettings.yAxisName=t.data.unit,a.chartData.desc=t.data.desc,a.chartData.chartName=t.data.name,a.chartData.unit=t.data.unit,a.chartData.columns=t.data.columns.map((function(t){return a.transformConfigName(t)})),a.chartData.columns.unshift("日期");for(var r=function(t){var e={};a.chartData.columns.forEach((function(t){e[t]=""})),a.chartData.rows.push(e)},n=0;n<t.data.values[0].length;n++)r(n);t.data.values.forEach((function(t,e,r){t.forEach((function(t,r){"日期"===a.chartData.columns[e]?a.chartData.rows[r][a.chartData.columns[e]]=Object(c["b"])(t):a.chartData.rows[r][a.chartData.columns[e]]=t}))}));break;case"pie":var i=[];t.data.columns.forEach((function(e,r){var n={};n["分類"]=a.transformConfigName(e),n["金額"]=t.data.values[r],i.push(n)})),1===b?(a.hasPie1Chart=!0,a.pieData1.rows=i,a.pieData1.desc=t.data.desc,a.pieData1.chartName=t.data.name,a.pieData1.unit=t.data.unit):(a.hasPie2Chart=!0,a.pieData2.rows=i,a.pieData2.desc=t.data.desc,a.pieData2.chartName=t.data.name,a.pieData2.unit=t.data.unit),b+=1;break;default:break}})),a.dialogVisible=!0,e.next=57;break;case 52:e.prev=52,e.t2=e["catch"](10),a.close(),console.log("打開分店詳細資料對話框錯誤",e.t2),a.sentMessage("取得詳細資料圖表錯誤","error");case 57:return e.prev=57,t.$store.dispatch("app/toggleLoading",!1),e.finish(57);case 60:case"end":return e.stop()}}),e,null,[[10,52,57,60],[16,38,41,44]])})))()},clearChart:function(){var t=this;t.chartData={columns:[],rows:[],desc:"",chartName:"",unit:""},t.pieData1={columns:["分類","金額"],rows:[{"分類":"","金額":0}],desc:"",chartName:"",unit:""},t.pieData2={columns:["分類","金額"],rows:[{"分類":"","金額":0}],desc:"",chartName:"",unit:""},t.chartSettings={yAxisName:["金額"],area:!0}},sentMessage:function(t,e){var a="success"===e?"成功":"錯誤";this.$notify({type:e,title:a,message:t})},close:function(){var t=this;t.searchValue=[Object(c["f"])(),Object(c["g"])()],t.clearChart(),t.clearIndex(),t.dialogVisible=!1},clearIndex:function(){var t=this;switch(t.registed){case"dashboard":t.$store.dispatch("navbarInfo/setDashboardIndex",null);break;case"branchManagement":t.$store.dispatch("navbarInfo/setBranchManagmentIndex",null);break;default:break}},pageClick:function(t){this.$emit("onPageClick",t)},transformConfigName:function(t){var e,a,r=this;return null!==(e=null===(a=r.$store.state.user.pcStateStyle[t])||void 0===a?void 0:a.name)&&void 0!==e?e:t}},created:function(){}},l=o,u=a("2877"),h=Object(u["a"])(l,r,n,!1,null,"55dae47b",null);e["a"]=h.exports},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),a("a630"),a("fb6a"),a("b0c0"),a("25f0");function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}function n(t,e){if(t){if("string"===typeof t)return r(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(t,e):void 0}}function i(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=n(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,c=!0,o=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return c=t.done,t},e:function(t){o=!0,s=t},f:function(){try{c||null==a["return"]||a["return"]()}finally{if(o)throw s}}}}},d28b:function(t,e,a){var r=a("746f");r("iterator")},e01a:function(t,e,a){"use strict";var r=a("23e7"),n=a("83ab"),i=a("da84"),s=a("5135"),c=a("861d"),o=a("9bf2").f,l=a("e893"),u=i.Symbol;if(n&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var h={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new u(t):void 0===t?u():u(t);return""===t&&(h[e]=!0),e};l(d,u);var f=d.prototype=u.prototype;f.constructor=d;var p=f.toString,b="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;o(f,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=p.call(t);if(s(h,t))return"";var a=b?e.slice(7,-1):e.replace(g,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:d})}},fb6a:function(t,e,a){"use strict";var r=a("23e7"),n=a("861d"),i=a("e8b5"),s=a("23cb"),c=a("50c4"),o=a("fc6a"),l=a("8418"),u=a("b622"),h=a("1dde"),d=a("ae40"),f=h("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),b=u("species"),g=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!f||!p},{slice:function(t,e){var a,r,u,h=o(this),d=c(h.length),f=s(t,d),p=s(void 0===e?d:e,d);if(i(h)&&(a=h.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?n(a)&&(a=a[b],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(h,f,p);for(r=new(void 0===a?Array:a)(v(p-f,0)),u=0;f<p;f++,u++)f in h&&l(r,u,h[f]);return r.length=u,r}})}}]);