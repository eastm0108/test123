(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79262685"],{"048d":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"infoCard",on:{click:function(e){return e.target!==e.currentTarget?null:t.clickCard(e)}}},[a("div",{staticClass:"infoCard__mainInfo"},["staff"===t.type?a("ul",{staticClass:"infoCard__mainInfo--staff",on:{click:t.clickCard}},[a("li",{staticClass:"infoCard__mainInfo__location"},[t._v(t._s(t.mainInfo.store.name))]),a("li",{staticClass:"infoCard__mainInfo__main"},[a("div",{staticClass:"infoCard__mainInfo__main__name"},[t._v(t._s(t.mainInfo.name))]),a("div",{staticClass:"infoCard__mainInfo__main__sex"},[t._v(t._s("boy"===t.mainInfo.gender?"(男)":"(女)"))])]),a("li",{staticClass:"infoCard__mainInfo__secondary"},[t._v(t._s(t.mainInfo.english))]),a("li",{staticClass:"infoCard__mainInfo__auxiliary"},[t._v(t._s("職位："+t.mainInfo.store.title))])]):t._e(),"advisory"===t.type?a("ul",{staticClass:"infoCard__mainInfo--advisory",on:{click:t.clickCard}},[a("li",{staticClass:"infoCard__mainInfo__location"},[t._v(t._s(t.mainInfo.location))]),a("li",{staticClass:"infoCard__mainInfo__main"},[t._v(t._s(t.mainInfo.name))]),a("li",{staticClass:"infoCard__mainInfo__secondary"},[t._v(t._s("店長："+t.mainInfo.manager.name))]),a("li",{staticClass:"infoCard__mainInfo__auxiliary"},[t._v(t._s("學員數量："+t.mainInfo.pcCount+"位"))])]):t._e()]),a("div",{staticClass:"infoCard__detailInfo"},["staff"===t.type?a("ul",{staticClass:"infoCard__detailInfo--staff",on:{click:t.clickCard}},t._l(t.detailInfo,(function(e,n){return a("li",{key:n},[t._v(" "+t._s(e.name+"："+e.value+e.unit)+" ")])})),0):t._e(),"advisory"===t.type?a("ul",{staticClass:"infoCard__detailInfo--advisory",on:{click:t.clickCard}},t._l(t.detailInfo,(function(e,n){return a("li",{key:n},[t._v(" "+t._s(e.name+"："+e.value+e.unit)+" ")])})),0):t._e()]),t.showDetailBtn?a("div",{staticClass:"infoCard__detailBtn"},[a("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("div",{staticClass:"avatar-wrapper"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{staticClass:"editDetailBtnArea",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.bindEvent,(function(e,n){return a("el-dropdown-item",{key:n,attrs:{command:e.key}},[a("i",{class:e.iconName}),a("span",{staticClass:"editBranchDetailBtn"},[t._v(t._s(e.name))])])})),1)],1)],1):t._e()])},r=[],s={name:"InfoCard",props:{type:{type:String,default:""},mainInfo:{type:Object,default:{}},detailInfo:{type:Array,default:function(){return[]}},bindEvent:{type:Array,default:[]},showDetailBtn:{type:Boolean,default:!0}},data:function(){return{}},methods:{clickCard:function(t){var e=this;e.$emit("onClickCard",e.mainInfo)},handleCommand:function(t){var e=this;e.$emit("onSelectDropdownItem",{key:t,data:e.mainInfo})}}},i=s,o=(a("09d4"),a("2877")),c=Object(o["a"])(i,n,r,!1,null,"2ec54c36",null);e["a"]=c.exports},"09d4":function(t,e,a){"use strict";var n=a("aed0"),r=a.n(n);r.a},"25f0":function(t,e,a){"use strict";var n=a("6eeb"),r=a("825a"),s=a("d039"),i=a("ad6d"),o="toString",c=RegExp.prototype,l=c[o],u=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=o;(u||d)&&n(RegExp.prototype,o,(function(){var t=r(this),e=String(t.source),a=t.flags,n=String(void 0===a&&t instanceof RegExp&&!("flags"in c)?i.call(t):a);return"/"+e+"/"+n}),{unsafe:!0})},3626:function(t,e,a){"use strict";var n=a("413c"),r=a.n(n);r.a},"3ca3":function(t,e,a){"use strict";var n=a("6547").charAt,r=a("69f3"),s=a("7dd0"),i="String Iterator",o=r.set,c=r.getterFor(i);s(String,"String",(function(t){o(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),a=e.string,r=e.index;return r>=a.length?{value:void 0,done:!0}:(t=n(a,r),e.index+=t.length,{value:t,done:!1})}))},"413c":function(t,e,a){},"4a71":function(t,e,a){},"4df4":function(t,e,a){"use strict";var n=a("0366"),r=a("7b0b"),s=a("9bdd"),i=a("e95a"),o=a("50c4"),c=a("8418"),l=a("35a1");t.exports=function(t){var e,a,u,d,p,m,_=r(t),f="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,g=void 0!==v,b=l(_),C=0;if(g&&(v=n(v,h>2?arguments[2]:void 0,2)),void 0==b||f==Array&&i(b))for(e=o(_.length),a=new f(e);e>C;C++)m=g?v(_[C],C):_[C],c(a,C,m);else for(d=b.call(_),p=d.next,a=new f;!(u=p.call(d)).done;C++)m=g?s(d,v,[u.value,C],!0):u.value,c(a,C,m);return a.length=C,a}},"745e":function(t,e,a){},8312:function(t,e,a){"use strict";var n=a("745e"),r=a.n(n);r.a},"97f0":function(t,e,a){"use strict";var n=a("ba10"),r=a.n(n);r.a},a630:function(t,e,a){var n=a("23e7"),r=a("4df4"),s=a("1c7e"),i=!s((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:i},{from:r})},ad9d:function(t,e,a){"use strict";var n=a("4a71"),r=a.n(n);r.a},aed0:function(t,e,a){},b85c:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),a("a630"),a("fb6a"),a("b0c0"),a("25f0");function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function r(t,e){if(t){if("string"===typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,e):void 0}}function s(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=r(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return o=t.done,t},e:function(t){c=!0,i=t},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(c)throw i}}}}},ba10:function(t,e,a){},bbff:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"listMananger"},[a("div",{staticClass:"header",class:{chartTitleFix:t.chartTitleFix}},[t._m(0),a("div",{staticClass:"header__timeBtnArea"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"開始日期","end-placeholder":"結束日期"},on:{change:function(e){return t.changeGetStoreDashboardChart()}},model:{value:t.pickDashboardTimeValue,callback:function(e){t.pickDashboardTimeValue=e},expression:"pickDashboardTimeValue"}})],1)]),0!==t.pieData1.rows.length&&0!==t.pieData2.rows.length&&0!==t.pieData3.rows.length&&0!==t.pieData4.rows.length?a("div",{staticClass:"pieArea"},[a("div",{staticClass:"pieArea__pieItem"},[a("div",{staticClass:"pieArea__pieItem__info"},t._l(t.pieData1.rows,(function(e,n){return a("p",{key:n+"id"},[t._v(" "+t._s(e["分類"]+":"+e["人數"]+t.pieData1.unit)+" ")])})),0),a("ve-pie",{staticClass:"pieArea__pieItem__chart",attrs:{legend:{show:!1},width:"500px",height:"320px",data:t.pieData1,textStyle:t.textStyle}}),a("p",{staticClass:"pieArea__pieItem__title"},[t._v(t._s(t.pieData1.chartName?t.pieData1.chartName:"如何獲得品牌"))])],1),a("div",{staticClass:"pieArea__pieItem"},[a("div",{staticClass:"pieArea__pieItem__info"},t._l(t.pieData2.rows,(function(e,n){return a("p",{key:n+"id"},[t._v(" "+t._s(e["分類"]+":"+e["人數"]+t.pieData2.unit)+" ")])})),0),a("ve-pie",{staticClass:"pieArea__pieItem__chart",attrs:{legend:{show:!1},width:"500px",height:"320px",data:t.pieData2,textStyle:t.textStyle}}),a("p",{staticClass:"pieArea__pieItem__title"},[t._v(t._s(t.pieData2.chartName?t.pieData2.chartName:"客戶分系（包含所也來源"))])],1),a("div",{staticClass:"pieArea__pieItem"},[a("div",{staticClass:"pieArea__pieItem__info"},t._l(t.pieData3.rows,(function(e,n){return a("p",{key:n+"id"},[t._v(" "+t._s(e["分類"]+":"+e["人數"]+t.pieData3.unit)+" ")])})),0),a("ve-pie",{staticClass:"pieArea__pieItem__chart",attrs:{legend:{show:!1},width:"500px",height:"320px",data:t.pieData3,textStyle:t.textStyle}}),a("p",{staticClass:"pieArea__pieItem__title"},[t._v(t._s(t.pieData3.chartName?t.pieData3.chartName:"各分店過路客來店比例"))])],1),a("div",{staticClass:"pieArea__pieItem"},[a("div",{staticClass:"pieArea__pieItem__info"},t._l(t.pieData4.rows,(function(e,n){return a("p",{key:n+"id"},[t._v(" "+t._s(e["分類"]+":"+e["人數"]+t.pieData4.unit)+" ")])})),0),a("ve-pie",{staticClass:"pieArea__pieItem__chart",attrs:{legend:{show:!1},width:"500px",height:"320px",data:t.pieData4,textStyle:t.textStyle}}),a("p",{staticClass:"pieArea__pieItem__title"},[t._v(t._s(t.pieData4.chartName?t.pieData4.chartName:"來源分析"))])],1)]):t._e(),a("el-divider",{staticClass:"divider"}),a("div",{staticClass:"header",class:{advisoryTitleFix:t.advisoryTitleFix}},[t._m(1)]),a("div",{staticClass:"advisory__infoList"},t._l(t.storeCustomerList,(function(e,n){return a("InfoCard",{key:n,class:{"advisory__infoList__item--front":n%3==0,"advisory__infoList__item--middle":n%3==1,"advisory__infoList__item--back":n%3==2},attrs:{type:"advisory",mainInfo:e,detailInfo:e.results,bindEvent:t.bindEvent,showDetailBtn:!1},on:{onClickCard:t.clickCard,onSelectDropdownItem:t.selectDropdownItem}})})),1),a("ShopCustomerDetail",{ref:"ShopCustomerDetail",on:{onPageClick:t.handlePage}})],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header__title"},[a("i",{staticClass:"el-icon-s-data"}),a("p",[t._v("統計圓餅圖")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header__title"},[a("i",{staticClass:"el-icon-s-comment"}),a("p",[t._v("各分店諮詢紀錄")])])}],s=(a("c740"),a("4160"),a("d81d"),a("b0c0"),a("b64b"),a("d3b7"),a("159b"),a("ddb0"),a("b85c")),i=(a("96cf"),a("1da1")),o=a("048d"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"dialog shopCustomerDetailDialog",attrs:{center:"",top:"2vh",title:t.branchName+"客戶的詳細資料","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"before-close":t.close,"lock-scroll":!0,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"shopCustomerDetailDialog__listArea"},[a("p",{staticClass:"shopCustomerDetailDialog__listArea__title"},[t._v(" 名單管理 ")]),a("el-scrollbar",{attrs:{viewClass:"shopCustomerDetailDialog__scrollbarView"}},[a("div",{staticClass:"shopCustomerDetailDialog__infoList"},t._l(t.customerAdvisoryCardList,(function(e,n){return a("CustomerAdvisoryCard",{key:n,staticClass:"shopCustomerDetailDialog__infoList__item",class:{"shopCustomerDetailDialog__infoList__item--one":(n+1)%3==1,"shopCustomerDetailDialog__infoList__item--two":(n+1)%3==2,"shopCustomerDetailDialog__infoList__item--tree":(n+1)%3==0},attrs:{selected:e.id==t.selectId,mainInfo:e,title:e.title,color:e.color,bindEvent:t.bindEvent},on:{onSelectDropdownItem:t.selectDropdownItem}})})),1)])],1),a("div",{staticClass:"shopCustomerDetailDialog__detailsArea"},[null==t.showDataType?a("p",{staticClass:"shopCustomerDetailDialog__detailsArea__nodata"},[t._v("無資料")]):t._e(),"log"===t.showDataType?a("ConsultationRecord",{attrs:{consultationRecordList:t.consultationRecordList}}):t._e(),"contract"===t.showDataType?a("ContractStatus",{attrs:{status:t.contractStatusData.status,manager:t.contractStatusData.manager,amount:t.contractStatusData.amount,frequency:t.contractStatusData.frequency,coach:t.contractStatusData.coach,introducer:t.contractStatusData.introducer,remarks:t.contractStatusData.remarks}}):t._e(),"contract"===t.showDataType?a("ContractRecord",{attrs:{contractRecord:t.contractRecord}}):t._e()],1),a("el-button",{staticClass:"closeBtn",attrs:{type:"danger"},on:{click:function(e){return t.close()}}},[t._v("關 閉")]),0!==t.index?a("svg-icon",{staticClass:"shopCustomerDetailDialog__arrow shopCustomerDetailDialog__arrow--left",attrs:{"icon-class":"triangular"},on:{click:function(e){return t.pageClick("pre")}}}):t._e(),t.index+1!=t.listLength?a("svg-icon",{staticClass:"shopCustomerDetailDialog__arrow shopCustomerDetailDialog__arrow--right",attrs:{"icon-class":"triangular"},on:{click:function(e){return t.pageClick("next")}}}):t._e()],1)},l=[],u=a("b00c"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customerAdvisoryCard",class:{"customerAdvisoryCard--selected":t.selected},on:{click:function(e){return e.target!==e.currentTarget?null:t.clickCard(e)}}},[a("div",{staticClass:"customerAdvisoryCard__tag",style:{backgroundColor:t.color}},[t._v(" "+t._s(t.title)+" ")]),a("div",{staticClass:"customerAdvisoryCard__nameArea"},[a("p",[t._v(" "+t._s(t.mainInfo.name)+" ")]),a("p",[t._v(" "+t._s("boy"===t.mainInfo.gender?"（男）":"（女）")+" ")])]),a("p",{staticClass:"customerAdvisoryCard__phone"},[t._v(t._s("電話："+t.mainInfo.phone))]),a("p",{staticClass:"customerAdvisoryCard__source"},[t._v(t._s("名單來源："+t.mainInfo.source))]),a("p",{staticClass:"customerAdvisoryCard__updateTime"},[t._v(" "+t._s("更新時間："+t.mainInfo.updateTime)+" ")]),a("div",{staticClass:"customerAdvisoryCard__detailBtn"},[a("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("div",{staticClass:"avatar-wrapper"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{staticClass:"editDetailBtnArea",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.bindEvent,(function(e,n){return a("el-dropdown-item",{key:n,attrs:{command:e.key}},[a("i",{class:e.iconName}),a("span",{staticClass:"editBranchDetailBtn"},[t._v(t._s(e.name))])])})),1)],1)],1)])},p=[],m={name:"CustomerAdvisoryCard",props:{selected:{type:Boolean,default:!1},title:{type:String,default:""},color:{type:String,default:""},mainInfo:{type:Object,default:{name:"",gender:"",phone:"",source:"",updateTime:""}},bindEvent:{type:Array,default:[]}},data:function(){return{}},methods:{clickCard:function(t){var e=this;e.$emit("onClickCard",e.mainInfo)},handleCommand:function(t){var e=this;e.$emit("onSelectDropdownItem",{key:t,data:e.mainInfo})}}},_=m,f=(a("e722"),a("2877")),h=Object(f["a"])(_,d,p,!1,null,"51087542",null),v=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"consultationRecordList"},[a("p",{staticClass:"consultationRecordList__title"},[t._v("歷史諮詢紀錄")]),a("el-scrollbar",{attrs:{viewClass:"consultationRecordList__scrollbarView"}},[0==t.consultationRecordList.length?a("p",{staticClass:"consultationRecordList__nodata"},[t._v("目前無資料")]):t._l(t.consultationRecordList,(function(e,n){return a("div",{key:n},[a("p",{staticClass:"consultationRecordList__datetime"},[t._v("更新時間："+t._s(t.timeTransform(e.datetime)))]),a("p",{staticClass:"consultationRecordList__message"},[t._v("諮詢內容："+t._s(e.desc))])])}))],2)],1)},b=[],C=a("c968"),y={props:{consultationRecordList:{type:Array,default:[]}},methods:{timeTransform:function(t){return Object(C["a"])(t)}},computed:{}},k=y,D=(a("8312"),Object(f["a"])(k,g,b,!1,null,"4b939e80",null)),O=D.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contractStatusList"},[a("p",{staticClass:"contractStatusList__title"},[t._v("合約狀態")]),a("div",{staticClass:"contractStatusList__info"},[a("div",{staticClass:"contractStatusList__info__item"},[a("p",{staticClass:"contractStatusList__info__item__title"},[t._v("狀態")]),a("p",[t._v(t._s(t.status))])]),a("div",{staticClass:"contractStatusList__info__item"},[a("p",{staticClass:"contractStatusList__info__item__title"},[t._v("店長")]),a("p",[t._v(t._s(t.manager))])]),a("div",{staticClass:"contractStatusList__info__item"},[a("p",{staticClass:"contractStatusList__info__item__title"},[t._v("金額")]),a("p",[t._v(t._s(t.amount)+" 元")])]),a("div",{staticClass:"contractStatusList__info__item"},[a("p",{staticClass:"contractStatusList__info__item__title"},[t._v("剩餘堂數")]),a("p",[t._v(t._s(t.frequency)+" 堂")])]),a("div",{staticClass:"contractStatusList__info__item"},[a("p",{staticClass:"contractStatusList__info__item__title"},[t._v("承辦教練")]),a("p",[t._v(t._s(t.coach))])]),a("div",{staticClass:"contractStatusList__info__item"},[a("p",{staticClass:"contractStatusList__info__item__title"},[t._v("介紹人")]),a("p",[t._v(t._s(t.introducer))])])]),a("div",{staticClass:"contractStatusList__remarks"},[a("p",{staticClass:"contractStatusList__remarks__title"},[t._v("備註")]),a("div",{staticClass:"contractStatusList__remarks__record"},[a("el-scrollbar",{attrs:{viewClass:"contractStatusList__scrollbarView"}},[a("p",[t._v(t._s(t.remarks))])])],1)])])},S=[],x=(a("a9e3"),{props:{status:{type:String,default:""},manager:{type:String,default:""},amount:{type:Number,default:0},frequency:{type:Number,default:0},coach:{type:String,default:""},introducer:{type:String,default:""},remarks:{type:String,default:""}},computed:{}}),I=x,L=(a("3626"),Object(f["a"])(I,w,S,!1,null,"b91c233a",null)),A=L.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contractRecordsList"},[a("p",{staticClass:"contractRecordsList__title"},[t._v("合約紀錄")]),a("div",{staticClass:"contractRecordsList__list"},[a("el-scrollbar",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.contractRecord}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"備註"}},[a("span",[t._v(t._s(e.row.remarks))])])],1)]}}])}),a("el-table-column",{attrs:{label:"狀態",prop:"status",width:"70"}}),a("el-table-column",{attrs:{label:"狀態時間點",prop:"date"}}),a("el-table-column",{attrs:{label:"店長",prop:"manager"}}),a("el-table-column",{attrs:{label:"承辦教練",prop:"coach"}}),a("el-table-column",{attrs:{label:"金額",prop:"amount"}})],1)],1)],1)])},$=[],j={props:{contractRecord:{type:Array,default:function(){return[]}}},computed:{}},T=j,M=(a("97f0"),Object(f["a"])(T,R,$,!1,null,"1441cc89",null)),N=M.exports,E=a("b775");function V(t){return Object(E["a"])({url:"/v1/pc",method:"get",params:t})}function B(t){return Object(E["a"])({url:"/v1/pc/".concat(t),method:"get"})}function F(){return Object(E["a"])({url:"/v1/pc/dashboard",method:"get"})}var U={name:"ShopCustomerDetailDialog",components:{CustomerAdvisoryCard:v,ConsultationRecord:O,ContractStatus:A,ContractRecord:N},data:function(){return{branchName:"",dialogVisible:!1,showDataType:null,searchValue:null,selectId:!1,options:[{value:"1",label:"新增"},{value:"2",label:"新增"},{value:"3",label:"諮詢在追蹤"},{value:"4",label:"諮詢拒絕"},{value:"5",label:"預約諮詢"},{value:"6",label:"消失放鳥"},{value:"7",label:"下次電訪"},{value:"8",label:"拒絕"},{value:"9",label:"無效名單"}],checked0:!1,checked1:!1,checked2:!1,checked3:!1,checked4:!1,checked5:!1,checked6:!1,checked7:!1,checked8:!1,sortValue:[],bindEvent:[{name:"諮詢紀錄",key:"log",iconName:"el-icon-takeaway-box"}],consultationRecordList:[],contractStatusData:{status:"有效合約",manager:"OOO",amount:34890,frequency:25,coach:"OOO",introducer:"OOO",remarks:"第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約第二次續約"},contractRecord:[{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"},{status:"續約",date:"2020/01/28",manager:"OOO",coach:"OOO",amount:"34895",remarks:"備註備註備註"}]}},computed:{customerAdvisoryCardList:function(){return this.$store.state.navbarInfo.listManagement.details},listLength:function(){return this.$store.state.navbarInfo.listManagement.list.length},index:function(){return this.$store.state.navbarInfo.listManagement.index}},methods:{opend:function(){this.dialogVisible=!0},close:function(){this.branchName="",this.showDataType=null,this.searchValue=null,this.selectId=null,this.currentRow=null,this.dialogVisible=!1,this.consultationRecordList=[],this.$store.dispatch("navbarInfo/setListManagmentDetails",[]),this.$store.dispatch("navbarInfo/setListManagmentIndex",null)},sort:function(){this.closeSortArea()},search:function(){},closeSortArea:function(){},selectDropdownItem:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e,a.t0=t.key,a.next="log"===a.t0?4:"contract"===a.t0?7:10;break;case 4:return a.next=6,n.getConsultationRecordList(t);case 6:return a.abrupt("break",11);case 7:return a.next=9,n.getConsultationContractList(t);case 9:return a.abrupt("break",11);case 10:return a.abrupt("break",11);case 11:case"end":return a.stop()}}),a)})))()},getConsultationRecordList:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,n.consultationRecordList=[],n.selectId=null,n.showDataType=null,n.$store.dispatch("app/toggleLoading",!0),a.prev=5,r=t.data.id,a.next=9,B(r);case 9:if(s=a.sent,s.status===u["a"].success){a.next=13;break}return n.sentMessage("取得諮詢清單","error"),a.abrupt("return",!1);case 13:n.consultationRecordList=s.data.connRec,n.selectId=r,n.showDataType="log",a.next=25;break;case 18:a.prev=18,a.t0=a["catch"](5),n.consultationRecordList=[],n.selectId=null,n.showDataType=null,console.log("取得諮詢 log 清單",a.t0),n.sentMessage("取得諮詢清單","error");case 25:return a.prev=25,n.$store.dispatch("app/toggleLoading",!1),a.finish(25);case 28:case"end":return a.stop()}}),a,null,[[5,18,25,28]])})))()},getConsultationContractList:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=e,console.log("查看詳情",t),n.selectId=t.data.id,n.showDataType="contract";case 5:case"end":return a.stop()}}),a)})))()},sentMessage:function(t,e){var a="success"===e?"成功":"錯誤";this.$notify({type:e,title:a,message:t})},pageClick:function(t){this.$emit("onPageClick",t)}},created:function(){}},q=U,P=Object(f["a"])(q,c,l,!1,null,"0b812b4b",null),G=P.exports,J=a("73f5"),K={name:"ListManagement",components:{InfoCard:o["a"],ShopCustomerDetail:G},created:function(){},beforeDestroy:function(){},data:function(){return{pickDashboardTimeValue:[Object(C["f"])(),Object(C["g"])()],pieData1:{columns:["分類","人數"],rows:[],desc:"",chartName:"",unit:""},pieData2:{columns:["分類","人數"],rows:[],desc:"",chartName:"",unit:""},pieData3:{columns:["分類","人數"],rows:[],desc:"",chartName:"",unit:""},pieData4:{columns:["分類","人數"],rows:[],desc:"",chartName:"",unit:""},pieUrlList:[{desc:null},{desc:null},{desc:null},{desc:null}],textStyle:{fontSize:16},bindEvent:[{name:"查看詳情",key:"lookat",iconName:"el-icon-view"}],advisoryList:[{mainInfo:{id:"1",location:"台北市",name:"西門店",manager:"黃小明",members:45},detailInfo:[{name:"成交人數",value:"10",unit:"人"},{name:"諮詢再追蹤人數",value:"10",unit:"人"},{name:"諮詢拒絕人數",value:"10",unit:"人"},{name:"預約諮詢人數",value:"20",unit:"人"},{name:"消失放鳥人數",value:"10",unit:"人"},{name:"下次電訪人數",value:"10",unit:"人"},{name:"拒絕人數",value:"10",unit:"人"},{name:"無效名單人數",value:"20",unit:"人"}]}],chartTitleFix:!1,advisoryTitleFix:!1}},mounted:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.dispatch("app/toggleLoading",!0),e.prev=1,0!==Object.keys(t.$store.state.user.pcStateStyle).length){e.next=5;break}return e.next=5,t.$store.dispatch("user/getConfig");case 5:return e.next=7,t.getStoreDashboardChart();case 7:return e.next=9,t.fetchStoreCustomerList();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log("進入頁面要資料初始化錯誤",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()},methods:{handleScroll:function(t){console.log(t)},fetchStoreCustomerList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.prev=1,e.next=4,Object(J["b"])();case 4:if(n=e.sent,n.status===u["a"].success){e.next=8;break}return a.sentMessage("各分店諮詢清單","error"),e.abrupt("return",!1);case 8:a.$store.dispatch("navbarInfo/setListManagmentList",n.data),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](1),a.$store.dispatch("navbarInfo/setListManagmentList",[]),console.log("各分店諮詢清單",e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))()},sentMessage:function(t,e){var a="success"===e?"成功":"錯誤";this.$notify({type:e,title:a,message:t})},getStoreDashboardChart:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.prev=1,e.next=4,F();case 4:if(n=e.sent,n.status===u["a"].success){e.next=8;break}return console.log("取得首頁圖表資訊"),e.abrupt("return",!1);case 8:a.pieUrlList=n.data,a.getChart(),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](1),console.log("取得首頁圖表資訊",e.t0),a.pieUrlList=[];case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))()},getChart:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,n,r,i,o,c,l,u,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,0!==Object.keys(t.$store.state.user.pcStateStyle).length){e.next=4;break}return e.next=4,t.$store.dispatch("user/getConfig");case 4:if(null!=a.pickDashboardTimeValue){e.next=7;break}return a.sentMessage("時間選擇錯誤","error"),e.abrupt("return",!1);case 7:if(n=null==a.pickDashboardTimeValue[0]?null:a.pickDashboardTimeValue[0],r=null==a.pickDashboardTimeValue[1]?null:a.pickDashboardTimeValue[1],null!=n&&null!=r){e.next=12;break}return a.sentMessage("時間選擇錯誤","error"),e.abrupt("return",!1);case 12:if(0!==a.pieUrlList.length){e.next=15;break}return a.sentMessage("圓餅圖 URL 資料錯誤","error"),e.abrupt("return",!1);case 15:e.prev=15,i=a.pieUrlList,o=[],c={sd:Object(C["c"])(n),ed:Object(C["c"])(r)},l=Object(s["a"])(i),e.prev=20,l.s();case 22:if((u=l.n()).done){e.next=30;break}return d=u.value,e.next=26,Object(C["e"])(d.url,c);case 26:p=e.sent,o.push({type:"pie",data:p});case 28:e.next=22;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](20),l.e(e.t0);case 35:return e.prev=35,l.f(),e.finish(35);case 38:m=1,o.forEach((function(t,e){var n=[];switch(t.data.columns.forEach((function(e,r){var s={};s["分類"]=a.transformConfigKayName(e),s["人數"]=t.data.values[r],n.push(s)})),m){case 1:a.pieData1.rows=n,a.pieData1.desc=t.data.desc,a.pieData1.chartName=t.data.name,a.pieData1.unit=t.data.unit;break;case 2:a.pieData2.rows=n,a.pieData2.desc=t.data.desc,a.pieData2.chartName=t.data.name,a.pieData2.unit=t.data.unit;break;case 3:a.pieData3.rows=n,a.pieData3.desc=t.data.desc,a.pieData3.chartName=t.data.name,a.pieData3.unit=t.data.unit;break;case 4:a.pieData4.rows=n,a.pieData4.desc=t.data.desc,a.pieData4.chartName=t.data.name,a.pieData4.unit=t.data.unit;break;default:break}m+=1})),e.next=46;break;case 42:e.prev=42,e.t1=e["catch"](15),console.log("取得圖表",e.t1),a.sentMessage("取得圖表","error");case 46:return e.prev=46,t.$store.dispatch("app/toggleLoading",!1),e.finish(46);case 49:case"end":return e.stop()}}),e,null,[[15,42,46,49],[20,32,35,38]])})))()},changeGetStoreDashboardChart:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.$store.dispatch("app/toggleLoading",!0),e.prev=2,e.next=5,a.getStoreDashboardChart();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](2),console.log("修改時間要圖表",e.t0);case 10:return e.prev=10,a.$store.dispatch("app/toggleLoading",!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})))()},clickCard:function(t){this.openShopCustomerDetailDialog(t)},selectDropdownItem:function(t){switch(t.key){case"lookat":this.openShopCustomerDetailDialog(t.data);break;default:break}},openShopCustomerDetailDialog:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=e,r=e.$store.state.navbarInfo.listManagement.list.findIndex((function(e,a){return e.id===t.id})),-1!==r){a.next=6;break}return n.sentMessage("開啟分店客戶詳細資料錯誤","error"),n.$store.dispatch("navbarInfo/setListManagmentIndex",null),a.abrupt("return",!1);case 6:return a.next=8,n.fetchStoreCustomerDetails(t.name);case 8:if(s=a.sent,s){a.next=12;break}return n.sentMessage("開啟分店客戶詳細資料錯誤","error"),a.abrupt("return",!1);case 12:n.$store.dispatch("navbarInfo/setListManagmentIndex",r),e.$refs.ShopCustomerDetail.branchName=t.name,e.$refs.ShopCustomerDetail.opend();case 15:case"end":return a.stop()}}),a)})))()},fetchStoreCustomerDetails:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e,r={store:t,sd:null,ed:null},n.$store.dispatch("app/toggleLoading",!0),a.prev=3,a.next=6,V(r);case 6:if(s=a.sent,s.status===u["a"].success){a.next=10;break}return n.sentMessage("取得分店客戶詳細資料","error"),a.abrupt("return",!1);case 10:if(0!==Object.keys(n.$store.state.user.pcStateStyle).length){a.next=13;break}return a.next=13,n.$store.dispatch("user/getConfig");case 13:return i=e.$store.state.user.pcStateStyle,o=s.data.rows.map((function(t,e){var a={title:i[t.state].name,color:i[t.state].hex,id:t.id,gender:t.gender,name:t.name,phone:t.phone,source:i[t.source].name,state:t.state,updateTime:Object(C["a"])(t.updateTime)};return a})),n.$store.dispatch("navbarInfo/setListManagmentDetails",o),a.abrupt("return",!0);case 19:return a.prev=19,a.t0=a["catch"](3),n.$store.dispatch("navbarInfo/setListManagmentDetails",[]),console.log("取得分店客戶詳細資料錯誤",a.t0),a.abrupt("return",!1);case 24:return a.prev=24,n.$store.dispatch("app/toggleLoading",!1),a.finish(24);case 27:case"end":return a.stop()}}),a,null,[[3,19,24,27]])})))()},handlePage:function(t){var e=this,a=e.$store.state.navbarInfo.listManagement.index;switch(t){case"pre":a-=1;break;case"next":a+=1;break;default:break}var n=e.$store.state.navbarInfo.listManagement.list[a];this.$refs.ShopCustomerDetail.close(),e.openShopCustomerDetailDialog(n)},transformConfigKayName:function(t){var e,a;return null!==(e=null===(a=this.$store.state.user.pcStateStyle[t])||void 0===a?void 0:a.name)&&void 0!==e?e:t}},computed:{storeCustomerList:function(){return this.$store.state.navbarInfo.listManagement.list}}},z=K,H=(a("ad9d"),Object(f["a"])(z,n,r,!1,null,"4c1cd100",null));e["default"]=H.exports},c740:function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").findIndex,s=a("44d2"),i=a("ae40"),o="findIndex",c=!0,l=i(o);o in[]&&Array(1)[o]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(o)},d28b:function(t,e,a){var n=a("746f");n("iterator")},d388:function(t,e,a){},e01a:function(t,e,a){"use strict";var n=a("23e7"),r=a("83ab"),s=a("da84"),i=a("5135"),o=a("861d"),c=a("9bf2").f,l=a("e893"),u=s.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof p?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};l(p,u);var m=p.prototype=u.prototype;m.constructor=p;var _=m.toString,f="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;c(m,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=_.call(t);if(i(d,t))return"";var a=f?e.slice(7,-1):e.replace(h,"$1");return""===a?void 0:a}}),n({global:!0,forced:!0},{Symbol:p})}},e722:function(t,e,a){"use strict";var n=a("d388"),r=a.n(n);r.a},fb6a:function(t,e,a){"use strict";var n=a("23e7"),r=a("861d"),s=a("e8b5"),i=a("23cb"),o=a("50c4"),c=a("fc6a"),l=a("8418"),u=a("b622"),d=a("1dde"),p=a("ae40"),m=d("slice"),_=p("slice",{ACCESSORS:!0,0:0,1:2}),f=u("species"),h=[].slice,v=Math.max;n({target:"Array",proto:!0,forced:!m||!_},{slice:function(t,e){var a,n,u,d=c(this),p=o(d.length),m=i(t,p),_=i(void 0===e?p:e,p);if(s(d)&&(a=d.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?r(a)&&(a=a[f],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return h.call(d,m,_);for(n=new(void 0===a?Array:a)(v(_-m,0)),u=0;m<_;m++,u++)m in d&&l(n,u,d[m]);return n.length=u,n}})}}]);