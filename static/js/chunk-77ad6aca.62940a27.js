(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77ad6aca"],{"048d":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"infoCard",on:{click:function(t){return t.target!==t.currentTarget?null:e.clickCard(t)}}},[a("div",{staticClass:"infoCard__mainInfo"},["staff"===e.type?a("ul",{staticClass:"infoCard__mainInfo--staff",on:{click:e.clickCard}},[a("li",{staticClass:"infoCard__mainInfo__location"},[e._v(e._s(e.mainInfo.store.name))]),a("li",{staticClass:"infoCard__mainInfo__main"},[a("div",{staticClass:"infoCard__mainInfo__main__name"},[e._v(e._s(e.mainInfo.name))]),a("div",{staticClass:"infoCard__mainInfo__main__sex"},[e._v(e._s("boy"===e.mainInfo.gender?"(男)":"(女)"))])]),a("li",{staticClass:"infoCard__mainInfo__secondary"},[e._v(e._s(e.mainInfo.english))]),a("li",{staticClass:"infoCard__mainInfo__auxiliary"},[e._v(e._s("職位："+e.mainInfo.store.title))])]):e._e(),"advisory"===e.type?a("ul",{staticClass:"infoCard__mainInfo--advisory",on:{click:e.clickCard}},[a("li",{staticClass:"infoCard__mainInfo__location"},[e._v(e._s(e.mainInfo.location))]),a("li",{staticClass:"infoCard__mainInfo__main"},[e._v(e._s(e.mainInfo.name))]),a("li",{staticClass:"infoCard__mainInfo__secondary"},[e._v(e._s("店長："+e.mainInfo.manager.name))]),a("li",{staticClass:"infoCard__mainInfo__auxiliary"},[e._v(e._s("學員數量："+e.mainInfo.pcCount+"位"))])]):e._e()]),a("div",{staticClass:"infoCard__detailInfo"},["staff"===e.type?a("ul",{staticClass:"infoCard__detailInfo--staff",on:{click:e.clickCard}},e._l(e.detailInfo,(function(t,n){return a("li",{key:n},[e._v(" "+e._s(t.name+"："+t.value+t.unit)+" ")])})),0):e._e(),"advisory"===e.type?a("ul",{staticClass:"infoCard__detailInfo--advisory",on:{click:e.clickCard}},e._l(e.detailInfo,(function(t,n){return a("li",{key:n},[e._v(" "+e._s(t.name+"："+t.value+t.unit)+" ")])})),0):e._e()]),e.showDetailBtn?a("div",{staticClass:"infoCard__detailBtn"},[a("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("div",{staticClass:"avatar-wrapper"},[a("i",{staticClass:"el-icon-more"})]),a("el-dropdown-menu",{staticClass:"editDetailBtnArea",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.bindEvent,(function(t,n){return a("el-dropdown-item",{key:n,attrs:{command:t.key}},[a("i",{class:t.iconName}),a("span",{staticClass:"editBranchDetailBtn"},[e._v(e._s(t.name))])])})),1)],1)],1):e._e()])},r=[],s={name:"InfoCard",props:{type:{type:String,default:""},mainInfo:{type:Object,default:{}},detailInfo:{type:Array,default:function(){return[]}},bindEvent:{type:Array,default:[]},showDetailBtn:{type:Boolean,default:!0}},data:function(){return{}},methods:{clickCard:function(e){var t=this;t.$emit("onClickCard",t.mainInfo)},handleCommand:function(e){var t=this;t.$emit("onSelectDropdownItem",{key:e,data:t.mainInfo})}}},i=s,o=(a("09d4"),a("2877")),l=Object(o["a"])(i,n,r,!1,null,"2ec54c36",null);t["a"]=l.exports},"09d4":function(e,t,a){"use strict";var n=a("aed0"),r=a.n(n);r.a},"0c72":function(e,t,a){},"211c":function(e,t,a){},"25f0":function(e,t,a){"use strict";var n=a("6eeb"),r=a("825a"),s=a("d039"),i=a("ad6d"),o="toString",l=RegExp.prototype,c=l[o],f=s((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),u=c.name!=o;(f||u)&&n(RegExp.prototype,o,(function(){var e=r(this),t=String(e.source),a=e.flags,n=String(void 0===a&&e instanceof RegExp&&!("flags"in l)?i.call(e):a);return"/"+t+"/"+n}),{unsafe:!0})},"3ca3":function(e,t,a){"use strict";var n=a("6547").charAt,r=a("69f3"),s=a("7dd0"),i="String Iterator",o=r.set,l=r.getterFor(i);s(String,"String",(function(e){o(this,{type:i,string:String(e),index:0})}),(function(){var e,t=l(this),a=t.string,r=t.index;return r>=a.length?{value:void 0,done:!0}:(e=n(a,r),t.index+=e.length,{value:e,done:!1})}))},"4df4":function(e,t,a){"use strict";var n=a("0366"),r=a("7b0b"),s=a("9bdd"),i=a("e95a"),o=a("50c4"),l=a("8418"),c=a("35a1");e.exports=function(e){var t,a,f,u,d,m,p=r(e),_="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,b=void 0!==h,v=c(p),y=0;if(b&&(h=n(h,g>2?arguments[2]:void 0,2)),void 0==v||_==Array&&i(v))for(t=o(p.length),a=new _(t);t>y;y++)m=b?h(p[y],y):p[y],l(a,y,m);else for(u=v.call(p),d=u.next,a=new _;!(f=d.call(u)).done;y++)m=b?s(u,h,[f.value,y],!0):f.value,l(a,y,m);return a.length=y,a}},5860:function(e,t,a){"use strict";var n=a("0c72"),r=a.n(n);r.a},"89af":function(e,t,a){"use strict";var n=a("211c"),r=a.n(n);r.a},a630:function(e,t,a){var n=a("23e7"),r=a("4df4"),s=a("1c7e"),i=!s((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:i},{from:r})},ac8a:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=[{key:1,label:"基隆市",value:"1"},{key:2,label:"臺北市",value:"2"},{key:3,label:"新北市",value:"3"},{key:4,label:"桃園市",value:"4"},{key:5,label:"新竹市",value:"5"},{key:6,label:"新竹縣",value:"6"},{key:7,label:"苗栗縣",value:"7"},{key:8,label:"臺中市",value:"8"},{key:9,label:"彰化縣",value:"9"},{key:10,label:"南投縣",value:"10"},{key:11,label:"雲林縣",value:"11"},{key:12,label:"嘉義市",value:"12"},{key:13,label:"嘉義縣",value:"13"},{key:14,label:"台南市",value:"14"},{key:15,label:"高雄市",value:"15"},{key:16,label:"屏東縣",value:"16"},{key:17,label:"台東縣",value:"17"},{key:18,label:"花蓮縣",value:"18"},{key:19,label:"宜蘭縣",value:"19"},{key:20,label:"澎湖縣",value:"20"},{key:21,label:"金門縣",value:"21"},{key:22,label:"連江縣",value:"22"}]},aed0:function(e,t,a){},b85c:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0"),a("a630"),a("fb6a"),a("b0c0"),a("25f0");function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function r(e,t){if(e){if("string"===typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}function s(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=r(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,s=function(){};return{s:s,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a["return"]||a["return"]()}finally{if(l)throw i}}}}},b97d:function(e,t,a){"use strict";a.r(t);var n,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"staff"},[a("div",{staticClass:"header"},[a("div",{staticClass:"header__title"},[a("i",{staticClass:"el-icon-s-custom"}),a("p",[e._v("員工清單（"+e._s(e.staffList.length)+"位員工）")])]),a("div",{staticClass:"header__btnArea"},[a("el-select",{staticClass:"header__btnArea__serchBranchBtn",attrs:{placeholder:"分店選擇",clearable:""},on:{change:e.changeBranchValue},model:{value:e.selectBranch,callback:function(t){e.selectBranch=t},expression:"selectBranch"}},e._l(e.branchList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("el-button",{staticClass:"header__btnArea__addStaffBtn"},[a("svg-icon",{staticClass:"header__btnArea__addStaffBtn__icon",attrs:{"icon-class":"add"}}),e._v(" 新增員工 ")],1),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"single"}},[e._v("單筆輸入")])],1)],1)],1)]),a("div",{staticClass:"staff__infoList"},e._l(e.staffList,(function(t,n){return a("InfoCard",{key:n,class:{"staff__infoList__item--front":n%3==0,"staff__infoList__item--middle":n%3==1,"staff__infoList__item--back":n%3==2},attrs:{type:"staff",mainInfo:t,detailInfo:t.results,bindEvent:e.bindEvent},on:{onClickCard:e.clickCard,onSelectDropdownItem:e.selectDropdownItem}})})),1),a("AddStaffDialog",{ref:"AddStaffDialog",on:{onCreateStaff:e.handleCreateStaff}}),a("EditStaffDialog",{ref:"EditStaffDialog",on:{onUpdataStaff:e.handleUpdataStaff}}),a("StaffDetailDialog",{ref:"StaffDetailDialog",attrs:{staffDetails:e.staffDetail},on:{onPageClick:e.handlePage}})],1)},s=[],i=(a("4de4"),a("c740"),a("d81d"),a("b0c0"),a("96cf"),a("1da1")),o=a("048d"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog staffDialog",attrs:{top:"2vh",title:"新增員工",center:"","close-on-click-modal":!1,"show-close":!1,"close-on-press-escape":!1,"before-close":e.close,"lock-scroll":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"staffDialog__basic"},[a("p",{staticClass:"staffDialog__basic__title"},[e._v(e._s("基本資料"))]),a("div",{staticClass:"staffDialog__basic__id"},[a("p",{staticClass:"staffDialog__basic__id__title"},[e._v("員工編號：")]),a("el-input",{attrs:{placeholder:e.idTipText,disabled:!e.isInputId},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}),a("el-checkbox",{model:{value:e.isInputId,callback:function(t){e.isInputId=t},expression:"isInputId"}},[e._v("選擇自行輸入")])],1),a("div",{staticClass:"staffDialog__basic__name"},[a("p",{staticClass:"staffDialog__basic__name__name"},[e._v("中文名稱：")]),a("el-input",{attrs:{placeholder:"請輸入中文名稱"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("p",{staticClass:"staffDialog__basic__name__english"},[e._v("英文名稱：")]),a("el-input",{attrs:{placeholder:"請輸入英文名稱"},model:{value:e.form.english,callback:function(t){e.$set(e.form,"english",t)},expression:"form.english"}})],1),a("div",{staticClass:"staffDialog__basic__sexAndbirthday"},[a("p",{staticClass:"staffDialog__basic__sexAndbirthday__sex"},[e._v("性別：")]),a("el-radio",{attrs:{label:"boy"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"girl"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")]),a("p",{staticClass:"staffDialog__basic__sexAndbirthday__birthday"},[e._v("生日：")]),a("el-date-picker",{attrs:{type:"date",placeholder:"選擇日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),a("div",{staticClass:"staffDialog__basic__emailAndDentity"},[a("p",{staticClass:"staffDialog__basic__emailAndDentity__email"},[e._v("Email：")]),a("el-input",{attrs:{placeholder:"請輸入Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("p",{staticClass:"staffDialog__basic__emailAndDentity__dentity"},[e._v("身分證字號：")]),a("el-input",{attrs:{placeholder:"請輸入身分證字號"},model:{value:e.form.dentity,callback:function(t){e.$set(e.form,"dentity",t)},expression:"form.dentity"}})],1),a("div",{staticClass:"staffDialog__basic__cellAndHome"},[a("p",{staticClass:"staffDialog__basic__cellAndHome__home"},[e._v("市內電話：")]),a("el-input",{attrs:{placeholder:"請輸入市內電話"},model:{value:e.form.contactHome,callback:function(t){e.$set(e.form,"contactHome",t)},expression:"form.contactHome"}}),a("p",{staticClass:"staffDialog__basic__cellAndHome__cell"},[e._v("手機號碼：")]),a("el-input",{attrs:{placeholder:"請輸入手機號碼"},model:{value:e.form.contactCell,callback:function(t){e.$set(e.form,"contactCell",t)},expression:"form.contactCell"}})],1),a("div",{staticClass:"staffDialog__basic__address"},[a("p",{staticClass:"staffDialog__basic__address__title"},[e._v("戶籍地址：")]),a("el-input",{attrs:{placeholder:"請輸入戶籍地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("div",{staticClass:"staffDialog__basic__residence"},[a("p",{staticClass:"staffDialog__basic__residence__title"},[e._v("通訊地址：")]),a("el-input",{attrs:{placeholder:"請輸入通訊地址"},model:{value:e.form.residence,callback:function(t){e.$set(e.form,"residence",t)},expression:"form.residence"}})],1),a("div",{staticClass:"staffDialog__basic__emergencyNameAndPhone"},[a("p",{staticClass:"staffDialog__basic__emergencyNameAndPhone__name"},[e._v("緊急聯絡人姓名：")]),a("el-input",{attrs:{placeholder:"請輸入緊急聯絡人姓名"},model:{value:e.form.emergencyName,callback:function(t){e.$set(e.form,"emergencyName",t)},expression:"form.emergencyName"}}),a("p",{staticClass:"staffDialog__basic__emergencyNameAndPhone__phone"},[e._v("緊急聯絡人電話：")]),a("el-input",{attrs:{placeholder:"請輸入緊急聯絡人電話："},model:{value:e.form.emergencyPhone,callback:function(t){e.$set(e.form,"emergencyPhone",t)},expression:"form.emergencyPhone"}})],1),a("div",{staticClass:"staffDialog__basic__emergencyRelation"},[a("p",{staticClass:"staffDialog__basic__emergencyRelation__title"},[e._v("緊急聯絡人關係：")]),a("el-input",{attrs:{placeholder:"請輸入緊急聯絡人關係"},model:{value:e.form.emergencyRelation,callback:function(t){e.$set(e.form,"emergencyRelation",t)},expression:"form.emergencyRelation"}})],1)]),a("div",{staticClass:"staffDialog__service"},[a("p",{staticClass:"staffDialog__service__title"},[e._v(e._s("服務單位"))]),a("div",{staticClass:"staffDialog__service__position"},[a("p",{staticClass:"staffDialog__service__position__name"},[e._v("職位：")]),a("el-select",{attrs:{placeholder:"請選擇職位"},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}},e._l(e.positionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1),a("div",{staticClass:"staffDialog__service__branch"},[a("p",{staticClass:"staffDialog__service__branch__name"},[e._v("服務分店：")]),a("el-select",{attrs:{placeholder:"請選擇服務分店"},model:{value:e.form.branch,callback:function(t){e.$set(e.form,"branch",t)},expression:"form.branch"}},e._l(e.branchList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.close()}}},[e._v("取 消")]),a("el-button",{staticClass:"confirmbtn",attrs:{type:"success"},on:{click:function(t){return e.send()}}},[e._v("確 定")])],1)])},c=[],f=a("c968"),u=a("b00c"),d=(a("ac8a"),a("73f5")),m=a("ef75"),p=a("61f7"),_={components:{},data:function(){var e=function(e,t,a){Object(p["c"])(t)?a(new Error("錯誤的身分證號碼")):a()};return{dialogVisible:!1,idTipText:"系統自動配發",form:{id:"",name:"",english:"",sex:"",birthday:"",contactCell:"",contactHome:"",dentity:"",email:"",address:"",residence:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",position:"",branch:""},rules:{name:[{required:!0,message:"請輸入中文姓名",trigger:"change"}],english:[{required:!0,message:"請輸入英文姓名",trigger:"change"}],sex:[{required:!0,message:"請選擇性別",trigger:"change"}],birthday:[{type:"date",required:!0,message:"請選擇生日日期",trigger:"change"}],contactCell:[{type:"date",required:!0,message:"請輸入手機號碼",trigger:"change"}],contactHome:[{type:"date",required:!0,message:"請輸入市內電話",trigger:"change"}],dentity:[{validator:e,required:!0,trigger:"change"}],email:[{type:"email",required:!0,message:"請輸入電子信箱",trigger:["change"]}],address:[{required:!0,message:"請輸入戶籍地址",trigger:"change"}],residence:[{required:!0,message:"請輸入通訊地址",trigger:"change"}],emergencyName:[{required:!0,message:"請輸入緊急聯絡人姓名",trigger:"change"}],emergencyPhone:[{required:!0,message:"請輸入緊急聯絡人電話",trigger:"change"}],emergencyRelation:[{required:!0,message:"請輸入與緊急聯絡人關係",trigger:"change"}],position:[{type:"date",required:!0,message:"請選擇職位",trigger:"change"}],branch:[{type:"date",required:!0,message:"請選擇分店",trigger:"change"}]},isInputId:!1,positionList:[{value:"1",label:"店長"},{value:"2",label:"教練"}],branchList:[{value:"1",label:"西門店"}]}},computed:{},methods:{opend:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.getStoreList();case 3:a.dialogVisible=!0;case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.formatForm(),this.isInputId=!1,this.dialogVisible=!1},formatForm:function(){this.form={id:"",name:"",english:"",sex:"",birthday:"",contactCell:"",contactHome:"",dentity:"",email:"",address:"",residence:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",position:"",branch:""}},send:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=e,n=a.checkFormData(),n){t.next=5;break}return t.abrupt("return",!1);case 5:return r={no:a.isInputId?a.form.id:"",name:a.form.name,gender:a.form.sex,english:a.form.english,birthday:Object(f["d"])(a.form.birthday),idNumber:a.form.dentity,address:[{type:"home",zipcode:"",city:"",region:"",address:a.form.address},{type:"residence",zipcode:"",city:"",region:"",address:a.form.residence}],contact:[{type:"cell",number:a.form.contactCell},{type:"home",number:a.form.contactHome}],email:a.form.email,emergencyContact:{name:a.form.emergencyName,phone:a.form.emergencyPhone,relationship:a.form.emergencyRelation},store:{id:a.form.branch,title:a.form.position}},t.next=9,a.addStaff(r);case 9:t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))()},checkFormData:function(){var e=this;return!e.isInputId||null!=e.form.id&&""!==e.form.id&&Object(p["f"])(e.form.id)?null==e.form.name||""===e.form.name?(e.sentAlert("資料錯誤","請輸入中文姓名"),!1):Object(p["e"])(e.form.name)?(e.sentAlert("資料錯誤","請輸入正確中文姓名"),!1):null==e.form.english||""===e.form.english?(e.sentAlert("資料錯誤","請輸入英文姓名"),!1):Object(p["e"])(e.form.english)?null==e.form.sex||""===e.form.sex?(e.sentAlert("資料錯誤","請選擇性別"),!1):null==e.form.birthday||""===e.form.birthday?(e.sentAlert("資料錯誤","請選擇生日日期"),!1):Object(p["h"])(e.form.email)?Object(p["c"])(e.form.dentity)?null==e.form.contactHome||""===e.form.contactHome?(e.sentAlert("資料錯誤","請輸入市內電話"),!1):!Object(p["g"])(e.form.contactHome)||e.form.contactHome.length<8?(e.sentAlert("資料錯誤","請輸入正確市內電話"),!1):null==e.form.contactCell||""===e.form.contactCell?(e.sentAlert("資料錯誤","請輸入手機號碼"),!1):Object(p["g"])(e.form.contactCell)&&10===e.form.contactCell.length?null==e.form.address||""===e.form.address?(e.sentAlert("資料錯誤","請輸入戶籍地址"),!1):null==e.form.residence||""===e.form.residence?(e.sentAlert("資料錯誤","請輸入通訊地址"),!1):null==e.form.emergencyName||""===e.form.emergencyName?(e.sentAlert("資料錯誤","請輸入緊急聯絡人姓名"),!1):null==e.form.emergencyPhone||""===e.form.emergencyPhone?(e.sentAlert("資料錯誤","請輸入緊急聯絡人電話"),!1):Object(p["g"])(e.form.emergencyPhone)&&10===e.form.emergencyPhone.length?null==e.form.emergencyRelation||""===e.form.emergencyRelation?(e.sentAlert("資料錯誤","請輸入與緊急聯絡人關係"),!1):null==e.form.position||""===e.form.position?(e.sentAlert("資料錯誤","請選擇職位"),!1):null!=e.form.branch&&""!==e.form.branch||(e.sentAlert("資料錯誤","請選擇分店"),!1):(e.sentAlert("資料錯誤","請輸入正確緊急聯絡人電話"),!1):(e.sentAlert("資料錯誤","請輸入正確手機號碼"),!1):(e.sentAlert("資料錯誤","請輸入正確的身分證號碼"),!1):(e.sentAlert("資料錯誤","請輸入正確的電子信箱"),!1):(e.sentAlert("資料錯誤","請輸入正確英文姓名"),!1):(e.sentAlert("資料錯誤","請輸入正確員工編號"),!1)},sentAlert:function(e,t){this.$alert(t,e,{confirmButtonText:"確定",type:"error"})},addStaff:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,a.prev=1,a.next=4,Object(m["a"])(e);case 4:if(r=a.sent,r.status===u["a"].success){a.next=8;break}return n.sentMessage("新增員工失敗","error"),a.abrupt("return",!1);case 8:n.sentMessage("新增員工成功","success"),n.close(),n.emitCreateStaff(),a.next=18;break;case 13:a.prev=13,a.t0=a["catch"](1),n.sentMessage("新增員工失敗","error"),console.log("新增員工失敗",a.t0),n.close();case 18:case"end":return a.stop()}}),a,null,[[1,13]])})))()},emitCreateStaff:function(){this.$store.dispatch("app/toggleLoading",!0),this.$emit("onCreateStaff")},getStoreList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.prev=1,n={key:null,f:"droplist"},t.next=5,Object(d["e"])(n);case 5:if(r=t.sent,r.status===u["a"].success){t.next=9;break}return a.sentMessage("取得分店清單","error"),t.abrupt("return",!1);case 9:return a.branchList=r.data.map((function(e,t){var a={key:t+1,label:e.name,value:e.id};return a})),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t["catch"](1),a.sentMessage("取得分店清單錯誤","error"),console.log("取得分店清單",t.t0),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,13]])})))()},sentMessage:function(e,t){var a="success"===t?"成功":"錯誤";this.$notify({type:t,title:a,message:e})}},created:function(){}},g=_,h=a("2877"),b=Object(h["a"])(g,l,c,!1,null,"17f86964",null),v=b.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog staffDialog",attrs:{top:"2vh",title:"修改資料",center:"","close-on-click-modal":!1,"show-close":!1,"close-on-press-escape":!1,"before-close":e.close,"lock-scroll":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"staffDialog__basic"},[a("p",{staticClass:"staffDialog__basic__title"},[e._v(e._s("基本資料"))]),a("div",{staticClass:"staffDialog__basic__id"},[a("p",{staticClass:"staffDialog__basic__id__title"},[e._v("員工編號：")]),a("el-input",{attrs:{placeholder:e.idTipText,disabled:!0},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),a("div",{staticClass:"staffDialog__basic__name"},[a("p",{staticClass:"staffDialog__basic__name__name"},[e._v("中文名稱：")]),a("el-input",{attrs:{placeholder:"請輸入中文名稱"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("p",{staticClass:"staffDialog__basic__name__english"},[e._v("英文名稱：")]),a("el-input",{attrs:{placeholder:"請輸入英文名稱"},model:{value:e.form.english,callback:function(t){e.$set(e.form,"english",t)},expression:"form.english"}})],1),a("div",{staticClass:"staffDialog__basic__sexAndbirthday"},[a("p",{staticClass:"staffDialog__basic__sexAndbirthday__sex"},[e._v("性別：")]),a("el-radio",{attrs:{label:"boy"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("男")]),a("el-radio",{attrs:{label:"girl"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},[e._v("女")]),a("p",{staticClass:"staffDialog__basic__sexAndbirthday__birthday"},[e._v("生日：")]),a("el-date-picker",{attrs:{type:"date",placeholder:"選擇日期"},model:{value:e.form.birthday,callback:function(t){e.$set(e.form,"birthday",t)},expression:"form.birthday"}})],1),a("div",{staticClass:"staffDialog__basic__emailAndDentity"},[a("p",{staticClass:"staffDialog__basic__emailAndDentity__email"},[e._v("Email：")]),a("el-input",{attrs:{placeholder:"請輸入Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),a("p",{staticClass:"staffDialog__basic__emailAndDentity__dentity"},[e._v("身分證字號：")]),a("el-input",{attrs:{placeholder:"請輸入身分證字號"},model:{value:e.form.dentity,callback:function(t){e.$set(e.form,"dentity",t)},expression:"form.dentity"}})],1),a("div",{staticClass:"staffDialog__basic__cellAndHome"},[a("p",{staticClass:"staffDialog__basic__cellAndHome__home"},[e._v("市內電話：")]),a("el-input",{attrs:{placeholder:"請輸入市內電話"},model:{value:e.form.contactHome,callback:function(t){e.$set(e.form,"contactHome",t)},expression:"form.contactHome"}}),a("p",{staticClass:"staffDialog__basic__cellAndHome__cell"},[e._v("手機號碼：")]),a("el-input",{attrs:{placeholder:"請輸入手機號碼"},model:{value:e.form.contactCell,callback:function(t){e.$set(e.form,"contactCell",t)},expression:"form.contactCell"}})],1),a("div",{staticClass:"staffDialog__basic__address"},[a("p",{staticClass:"staffDialog__basic__address__title"},[e._v("戶籍地址：")]),a("el-input",{attrs:{placeholder:"請輸入戶籍地址"},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),a("div",{staticClass:"staffDialog__basic__residence"},[a("p",{staticClass:"staffDialog__basic__residence__title"},[e._v("通訊地址：")]),a("el-input",{attrs:{placeholder:"請輸入通訊地址"},model:{value:e.form.residence,callback:function(t){e.$set(e.form,"residence",t)},expression:"form.residence"}})],1),a("div",{staticClass:"staffDialog__basic__emergencyNameAndPhone"},[a("p",{staticClass:"staffDialog__basic__emergencyNameAndPhone__name"},[e._v("緊急聯絡人姓名：")]),a("el-input",{attrs:{placeholder:"請輸入緊急聯絡人姓名"},model:{value:e.form.emergencyName,callback:function(t){e.$set(e.form,"emergencyName",t)},expression:"form.emergencyName"}}),a("p",{staticClass:"staffDialog__basic__emergencyNameAndPhone__phone"},[e._v("緊急聯絡人電話：")]),a("el-input",{attrs:{placeholder:"請輸入緊急聯絡人電話："},model:{value:e.form.emergencyPhone,callback:function(t){e.$set(e.form,"emergencyPhone",t)},expression:"form.emergencyPhone"}})],1),a("div",{staticClass:"staffDialog__basic__emergencyRelation"},[a("p",{staticClass:"staffDialog__basic__emergencyRelation__title"},[e._v("緊急聯絡人關係：")]),a("el-input",{attrs:{placeholder:"請輸入緊急聯絡人關係"},model:{value:e.form.emergencyRelation,callback:function(t){e.$set(e.form,"emergencyRelation",t)},expression:"form.emergencyRelation"}})],1)]),a("div",{staticClass:"staffDialog__service"},[a("p",{staticClass:"staffDialog__service__title"},[e._v(e._s("服務單位"))]),a("div",{staticClass:"staffDialog__service__position"},[a("p",{staticClass:"staffDialog__service__position__name"},[e._v("職位：")]),a("el-select",{attrs:{placeholder:"請選擇職位"},model:{value:e.form.position,callback:function(t){e.$set(e.form,"position",t)},expression:"form.position"}},e._l(e.positionList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1),a("div",{staticClass:"staffDialog__service__branch"},[a("p",{staticClass:"staffDialog__service__branch__name"},[e._v("服務分店：")]),a("el-select",{attrs:{placeholder:"請選擇服務分店"},model:{value:e.form.branch,callback:function(t){e.$set(e.form,"branch",t)},expression:"form.branch"}},e._l(e.branchList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.close()}}},[e._v("取 消")]),a("el-button",{staticClass:"confirmbtn",attrs:{type:"success"},on:{click:function(t){return e.send()}}},[e._v("確 定")])],1)])},C=[],D={components:{},data:function(){return{dialogVisible:!1,idTipText:"系統自動配發",form:{id:"",name:"",english:"",sex:"",birthday:"",contactCell:"",contactHome:"",dentity:"",email:"",address:"",residence:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",position:"",branch:""},isInputId:!1,positionList:[{value:"1",label:"店長"},{value:"2",label:"教練"}],branchList:[{value:"1",label:"西門店"}]}},computed:{},methods:{opend:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,a.getStoreList();case 3:a.dialogVisible=!0;case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.formatForm(),this.dialogVisible=!1},formatForm:function(){this.form={id:"",name:"",english:"",sex:"",birthday:"",contactCell:"",contactHome:"",dentity:"",email:"",address:"",residence:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",position:"",branch:""}},send:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,a=e,n=a.checkFormData(),n){t.next=5;break}return t.abrupt("return",!1);case 5:return r={no:a.form.id,name:a.form.name,gender:a.form.sex,english:a.form.english,birthday:a.form.birthday,idNumber:a.form.dentity,address:[{type:"home",zipcode:"",city:"",region:"",address:a.form.address},{type:"residence",zipcode:"",city:"",region:"",address:a.form.residence}],contact:[{type:"cell",number:a.form.contactCell},{type:"home",number:a.form.contactHome}],email:a.form.email,emergencyContact:{name:a.form.emergencyName,phone:a.form.emergencyPhone,relationship:a.form.emergencyRelation},store:{id:a.form.branch,title:a.form.position}},t.next=9,a.editStaff(r);case 9:t.next=13;break;case 11:t.prev=11,t.t0=t["catch"](0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})))()},checkFormData:function(){var e=this;return null==e.form.name||""===e.form.name?(e.sentAlert("資料錯誤","請輸入中文姓名"),!1):Object(p["e"])(e.form.name)?(e.sentAlert("資料錯誤","請輸入正確中文姓名"),!1):null==e.form.english||""===e.form.english?(e.sentAlert("資料錯誤","請輸入英文姓名"),!1):Object(p["e"])(e.form.english)?null==e.form.sex||""===e.form.sex?(e.sentAlert("資料錯誤","請選擇性別"),!1):null==e.form.birthday||""===e.form.birthday?(e.sentAlert("資料錯誤","請選擇生日日期"),!1):Object(p["h"])(e.form.email)?Object(p["c"])(e.form.dentity)?null==e.form.contactHome||""===e.form.contactHome?(e.sentAlert("資料錯誤","請輸入市內電話"),!1):!Object(p["g"])(e.form.contactHome)||e.form.contactHome.length<8?(e.sentAlert("資料錯誤","請輸入正確市內電話"),!1):null==e.form.contactCell||""===e.form.contactCell?(e.sentAlert("資料錯誤","請輸入手機號碼"),!1):Object(p["g"])(e.form.contactCell)&&10===e.form.contactCell.length?null==e.form.address||""===e.form.address?(e.sentAlert("資料錯誤","請輸入戶籍地址"),!1):null==e.form.residence||""===e.form.residence?(e.sentAlert("資料錯誤","請輸入通訊地址"),!1):null==e.form.emergencyName||""===e.form.emergencyName?(e.sentAlert("資料錯誤","請輸入緊急聯絡人姓名"),!1):null==e.form.emergencyPhone||""===e.form.emergencyPhone?(e.sentAlert("資料錯誤","請輸入緊急聯絡人電話"),!1):Object(p["g"])(e.form.emergencyPhone)&&10===e.form.emergencyPhone.length?null==e.form.emergencyRelation||""===e.form.emergencyRelation?(e.sentAlert("資料錯誤","請輸入與緊急聯絡人關係"),!1):null==e.form.position||""===e.form.position?(e.sentAlert("資料錯誤","請選擇職位"),!1):null!=e.form.branch&&""!==e.form.branch||(e.sentAlert("資料錯誤","請選擇分店"),!1):(e.sentAlert("資料錯誤","請輸入正確緊急聯絡人電話"),!1):(e.sentAlert("資料錯誤","請輸入正確手機號碼"),!1):(e.sentAlert("資料錯誤","請輸入正確的身分證號碼"),!1):(e.sentAlert("資料錯誤","請輸入正確的電子信箱"),!1):(e.sentAlert("資料錯誤","請輸入正確英文姓名"),!1)},sentAlert:function(e,t){this.$alert(t,e,{confirmButtonText:"確定",type:"error"})},editStaff:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,n.$store.dispatch("app/toggleLoading",!0),a.prev=2,a.next=5,Object(m["b"])(e.no,e);case 5:if(r=a.sent,r.status===u["a"].success){a.next=9;break}return n.sentMessage("修改員工失敗","error"),a.abrupt("return",!1);case 9:n.sentMessage("修改員工成功","success"),n.close(),n.emitUpdataStaff(),a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](2),console.log("修改員工失敗",a.t0);case 17:return a.prev=17,t.$store.dispatch("app/toggleLoading",!1),a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[2,14,17,20]])})))()},emitUpdataStaff:function(){this.$store.dispatch("app/toggleLoading",!0),this.$emit("onUpdataStaff")},getStoreList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.prev=1,n={key:null,f:"droplist"},t.next=5,Object(d["e"])(n);case 5:if(r=t.sent,r.status===u["a"].success){t.next=9;break}return a.sentMessage("取得分店清單","error"),t.abrupt("return",!1);case 9:return a.branchList=r.data.map((function(e,t){var a={key:t+1,label:e.name,value:e.id};return a})),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t["catch"](1),a.sentMessage("取得分店清單錯誤","error"),console.log("取得分店清單",t.t0),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,13]])})))()},sentMessage:function(e,t){var a="success"===t?"成功":"錯誤";this.$notify({type:t,title:a,message:e})}},created:function(){}},k=D,x=(a("89af"),Object(h["a"])(k,y,C,!1,null,"3736f517",null)),S=x.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"dialog staffDetailDialog",attrs:{left:"",top:"2vh",title:e.staffDetails.name+"的詳細資料","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"before-close":e.close,"lock-scroll":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"btnArea"},[a("el-date-picker",{staticClass:"search",attrs:{type:"daterange","range-separator":"至","start-placeholder":"開始日期","end-placeholder":"結束日期"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("el-button",{staticClass:"btnArea__searchbtn",on:{click:function(t){return e.getStaffChart()}}},[e._v("查詢")])],1),e.hasLineChart?a("div",{staticClass:"lineChartData"},[a("ve-line",{attrs:{data:e.chartData,settings:e.chartSettings,textStyle:e.textStyle}})],1):a("div",{staticClass:"noLineChartData"},[a("p",[e._v(" 沒有折線圖資料 ")])]),a("div",{staticClass:"pieArea"},[e.hasPie1Chart?a("div",{staticClass:"pieArea__pieItem pieChartData"},[a("h3",{staticClass:"pieArea__pieItem__title"},[e._v(e._s(e.pieData1.chartName))]),a("div",{staticClass:"pieArea__pieItem__info"},e._l(e.pieData1.rows,(function(t,n){return a("p",{key:n+"id"},[e._v(" "+e._s(t["分類"]+":"+t["金額"]+e.pieData1.unit)+" ")])})),0),a("ve-pie",{staticClass:"pieArea__pieItem__chart",attrs:{settings:e.chartPieSettings,legend:{show:!1},width:"400px",height:"320px",data:e.pieData1,textStyle:e.textStyle}})],1):a("div",{staticClass:"noPie1ChartData"},[a("p",[e._v(" 沒有圓餅圖資料 ")])]),e.hasPie2Chart?a("div",{staticClass:"pieArea__pieItem pieChartData"},[a("h3",{staticClass:"pieArea__pieItem__title"},[e._v(e._s(e.pieData2.chartName))]),a("div",{staticClass:"pieArea__pieItem__info"},e._l(e.pieData2.rows,(function(t,n){return a("p",{key:n+"id"},[e._v(" "+e._s(t["分類"]+":"+t["金額"]+e.pieData2.unit)+" ")])})),0),a("ve-pie",{staticClass:"pieArea__pieItem__chart",attrs:{settings:e.chartPieSettings,legend:{show:!1},width:"400px",height:"320px",data:e.pieData2,textStyle:e.textStyle}})],1):a("div",{staticClass:"noPie2ChartData"},[a("p",[e._v(" 沒有圓餅圖資料 ")])])]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-dialog__footer__btn",on:{click:function(t){e.dialogVisible=!1}}},[e._v("確 定")])],1),0!==e.index?a("svg-icon",{staticClass:"staffDetailDialog__arrow staffDetailDialog__arrow--left",attrs:{"icon-class":"triangular"},on:{click:function(t){return e.pageClick("pre")}}}):e._e(),e.index+1!=e.listLength?a("svg-icon",{staticClass:"staffDetailDialog__arrow staffDetailDialog__arrow--right",attrs:{"icon-class":"triangular"},on:{click:function(t){return e.pageClick("next")}}}):e._e()],1)},w=[],$=(a("4160"),a("b64b"),a("d3b7"),a("159b"),a("ddb0"),a("ade3")),I=a("b85c"),O={props:{staffDetails:{type:Object,default:function(){}}},data:function(){return{dialogVisible:!1,chartPieSettings:{label:{fontSize:13}},chartData:{columns:[],rows:[],desc:"",chartName:"",unit:""},pieData1:{columns:["分類","金額"],rows:[{"分類":"","金額":0}],desc:"",chartName:"",unit:""},pieData2:{columns:["分類","金額"],rows:[{"分類":"","金額":0}],desc:"",chartName:"",unit:""},chartSettings:{yAxisName:["金額"],area:!0},textStyle:{fontSize:16},searchValue:[Object(f["f"])(),Object(f["g"])()],hasLineChart:!1,hasPie1Chart:!1,hasPie2Chart:!1}},computed:{index:function(){return this.$store.state.navbarInfo.staffManagement.index},listLength:function(){return this.$store.state.navbarInfo.staffManagement.list.length}},methods:(n={opend:function(){this.dialogVisible=!0}},Object($["a"])(n,"opend",(function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,n=null!=a.staffDetails.anilyze&&a.staffDetails.anilyze.length>0,n){t.next=6;break}return a.clearIndex(),a.dialogVisible=!1,t.abrupt("return",!1);case 6:return t.next=8,a.getStaffChart();case 8:case"end":return t.stop()}}),t)})))()})),Object($["a"])(n,"getStaffChart",(function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r,s,i,o,l,c,u,d,m,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e,null!=a.searchValue){t.next=4;break}return a.sentMessage("時間選擇錯誤","error"),t.abrupt("return",!1);case 4:if(n=null==a.searchValue[0]?null:a.searchValue[0],r=null==a.searchValue[1]?null:a.searchValue[1],null!=n&&null!=r){t.next=9;break}return a.sentMessage("時間選擇錯誤","error"),t.abrupt("return",!1);case 9:a.clearChart(),t.prev=10,e.$store.dispatch("app/toggleLoading",!0),s=a.staffDetails.anilyze,i=[],o={sd:Object(f["c"])(n),ed:Object(f["c"])(r)},l=Object(I["a"])(s),t.prev=16,l.s();case 18:if((c=l.n()).done){t.next=36;break}u=c.value,t.t0=u.type,t.next="pie"===t.t0?23:"line"===t.t0?28:33;break;case 23:return t.next=25,Object(f["e"])(u.url,o);case 25:return d=t.sent,i.push({type:"pie",data:d}),t.abrupt("break",34);case 28:return t.next=30,Object(f["e"])(u.url,o);case 30:return m=t.sent,i.push({type:"chart",data:m}),t.abrupt("break",34);case 33:return t.abrupt("break",34);case 34:t.next=18;break;case 36:t.next=41;break;case 38:t.prev=38,t.t1=t["catch"](16),l.e(t.t1);case 41:return t.prev=41,l.f(),t.finish(41);case 44:if(0!==Object.keys(a.$store.state.user.pcStateStyle).length){t.next=47;break}return t.next=47,a.$store.dispatch("user/getConfig");case 47:p=1,i.forEach((function(e,t){if(null==e.data.values&&null==e.data.columns)return"pie"===e.type&&(1===p&&(a.hasPie1Chart=!1,p+=1),2===p&&(a.hasPie2Chart=!1)),void("chart"===e.type&&(a.hasLineChart=!1));switch(e.type){case"chart":a.hasLineChart=!0,a.chartSettings.yAxisName=e.data.unit,a.chartData.desc=e.data.desc,a.chartData.chartName=e.data.name,a.chartData.unit=e.data.unit,a.chartData.columns=e.data.columns.map((function(e){return a.transformConfigName(e)})),a.chartData.columns.unshift("日期");for(var n=function(e){var t={};a.chartData.columns.forEach((function(e){t[e]=""})),a.chartData.rows.push(t)},r=0;r<e.data.values[0].length;r++)n(r);e.data.values.forEach((function(e,t,n){e.forEach((function(e,n){"日期"===a.chartData.columns[t]?a.chartData.rows[n][a.chartData.columns[t]]=Object(f["b"])(e):a.chartData.rows[n][a.chartData.columns[t]]=e}))}));break;case"pie":var s=[];e.data.columns.forEach((function(t,n){var r={};r["分類"]=a.transformConfigName(t),r["金額"]=e.data.values[n],s.push(r)})),1===p?(a.hasPie1Chart=!0,a.pieData1.rows=s,a.pieData1.desc=e.data.desc,a.pieData1.chartName=e.data.name,a.pieData1.unit=e.data.unit):(a.hasPie2Chart=!0,a.pieData2.rows=s,a.pieData2.desc=e.data.desc,a.pieData2.chartName=e.data.name,a.pieData2.unit=e.data.unit),p+=1;break;default:break}})),a.dialogVisible=!0,t.next=57;break;case 52:t.prev=52,t.t2=t["catch"](10),a.close(),console.log("打開員工詳細資料對話框錯誤",t.t2),a.sentMessage("取得詳細資料圖表錯誤","error");case 57:return t.prev=57,e.$store.dispatch("app/toggleLoading",!1),t.finish(57);case 60:case"end":return t.stop()}}),t,null,[[10,52,57,60],[16,38,41,44]])})))()})),Object($["a"])(n,"sentMessage",(function(e,t){var a="success"===t?"成功":"錯誤";this.$notify({type:t,title:a,message:e})})),Object($["a"])(n,"close",(function(){var e=this;e.searchValue=[Object(f["f"])(),Object(f["g"])()],e.clearIndex(),this.dialogVisible=!1})),Object($["a"])(n,"clearChart",(function(){var e=this;e.chartData={columns:[],rows:[],desc:"",chartName:"",unit:""},e.pieData1={columns:["分類","金額"],rows:[{"分類":"","金額":0}],desc:"",chartName:"",unit:""},e.pieData2={columns:["分類","金額"],rows:[{"分類":"","金額":0}],desc:"",chartName:"",unit:""},e.chartSettings={yAxisName:["金額"],area:!0}})),Object($["a"])(n,"clearIndex",(function(){var e=this;e.$store.dispatch("navbarInfo/setStaffManagmentIndex",null)})),Object($["a"])(n,"pageClick",(function(e){this.$emit("onPageClick",e)})),Object($["a"])(n,"transformConfigName",(function(e){var t,a;return null!==(t=null===(a=this.$store.state.user.pcStateStyle[e])||void 0===a?void 0:a.name)&&void 0!==t?t:e})),n),created:function(){}},j=O,R=Object(h["a"])(j,A,w,!1,null,"3d613073",null),E=R.exports,L={name:"Staff",components:{InfoCard:o["a"],StaffDetailDialog:E,AddStaffDialog:v,EditStaffDialog:S},data:function(){return{branchList:[],selectBranch:null,bindEvent:[{name:"修改資料",key:"edit",iconName:"el-icon-edit"}]}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getStoreList();case 2:case"end":return t.stop()}}),t)})))()},methods:{getStoreList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.prev=1,n={key:null,f:"droplist"},t.next=5,Object(d["e"])(n);case 5:if(r=t.sent,r.status===u["a"].success){t.next=9;break}return a.sentMessage("取得分店清單","error"),t.abrupt("return",!1);case 9:return a.branchList=r.data.map((function(e,t){var a={key:t+1,label:e.name,value:e.id};return a})),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t["catch"](1),a.sentMessage("取得分店清單錯誤","error"),console.log("取得分店清單",t.t0),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,13]])})))()},handleCommand:function(e){switch(e){case"single":console.log("單筆"),this.opendAddStaffDialog();break;case"multiple":console.log("多筆"),this.opendUploadTableDialog();break;default:break}},opendAddStaffDialog:function(){var e=this;console.log("打開新增員工對話框"),e.$refs.AddStaffDialog.opend()},opendUploadTableDialog:function(){console.log("打開上傳檔案對話框"),this.$store.dispatch("app/toggleUploadTable",!0)},clickCard:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,a.prev=1,a.next=4,n.getStaffDetail(e.no);case 4:r=a.sent,r&&(s=n.$store.state.navbarInfo.staffManagement.list.findIndex((function(t,a){return t.no===e.no})),n.$store.dispatch("navbarInfo/setStaffManagmentIndex",s),n.$refs.StaffDetailDialog.opend()),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()},selectDropdownItem:function(e){switch(e.key){case"edit":this.opendEditStaffDialog(e.data);break;default:break}},opendEditStaffDialog:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r,s,i,o,l,c,f,u,d,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,a.next=3,n.getStaffDetail(e.no);case 3:r=a.sent,r&&(m=n.$store.state.navbarInfo.staffManagement.detail,n.$refs.EditStaffDialog.form.id=m.no,n.$refs.EditStaffDialog.form.name=m.name,n.$refs.EditStaffDialog.form.english=m.english,n.$refs.EditStaffDialog.form.sex=m.gender,n.$refs.EditStaffDialog.form.birthday=m.birthday,n.$refs.EditStaffDialog.form.contactCell=null!==(s=null===(i=m.contact.filter((function(e){return"cell"===e.type}))[0])||void 0===i?void 0:i.number)&&void 0!==s?s:"",n.$refs.EditStaffDialog.form.contactHome=null!==(o=null===(l=m.contact.filter((function(e){return"home"===e.type}))[0])||void 0===l?void 0:l.number)&&void 0!==o?o:"",n.$refs.EditStaffDialog.form.dentity=m.idNumber,n.$refs.EditStaffDialog.form.email=m.email,n.$refs.EditStaffDialog.form.address=null!==(c=null===(f=m.address.filter((function(e){return"home"===e.type}))[0])||void 0===f?void 0:f.address)&&void 0!==c?c:"",n.$refs.EditStaffDialog.form.residence=null!==(u=null===(d=m.address.filter((function(e){return"residence"===e.type}))[0])||void 0===d?void 0:d.address)&&void 0!==u?u:"",n.$refs.EditStaffDialog.form.emergencyName=m.emergencyContact.name,n.$refs.EditStaffDialog.form.emergencyPhone=m.emergencyContact.phone,n.$refs.EditStaffDialog.form.emergencyRelation=m.emergencyContact.relationship,n.$refs.EditStaffDialog.form.position=m.store.title,n.$refs.EditStaffDialog.form.branch=m.store.id,n.$refs.EditStaffDialog.opend());case 5:case"end":return a.stop()}}),a)})))()},changeBranchValue:function(e){var t=this,a=""==e?null:e;t.$store.dispatch("navbarInfo/setStaffManagmentBranch",a),t.getStaffList()},getStaffList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.prev=1,a.$store.dispatch("app/toggleLoading",!0),t.next=5,a.$store.dispatch("navbarInfo/getStaffList");case 5:n=t.sent,n||a.sentMessage("取得員工清單","error"),t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](1),a.selectBranch=null,a.$store.dispatch("navbarInfo/setStaffManagmentBranch",a.selectBranch),console.log("取得員工清單",t.t0);case 14:return t.prev=14,a.$store.dispatch("app/toggleLoading",!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,9,14,17]])})))()},sentMessage:function(e,t){var a="success"===t?"成功":"錯誤";this.$notify({type:t,title:a,message:e})},handleCreateStaff:function(){this.$router.go()},handleUpdataStaff:function(){this.$router.go()},getStaffDetail:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t,t.$store.dispatch("app/toggleLoading",!0),a.prev=2,a.next=5,Object(m["c"])(e);case 5:if(r=a.sent,r.status!==u["a"].success){a.next=9;break}return n.$store.dispatch("navbarInfo/setStaffManagmentDetail",r.data),a.abrupt("return",!0);case 9:return n.sentMessage("取得員工詳細資料","error"),a.abrupt("return",!1);case 13:return a.prev=13,a.t0=a["catch"](2),console.log("取得員工詳細資料",a.t0),n.sentMessage("取得員工詳細資料","error"),a.abrupt("return",!1);case 18:return a.prev=18,t.$store.dispatch("app/toggleLoading",!1),a.finish(18);case 21:case"end":return a.stop()}}),a,null,[[2,13,18,21]])})))()},handlePage:function(e){var t=this,a=t.$store.state.navbarInfo.staffManagement.index;switch(t.$store.dispatch("app/toggleLoading",!0),e){case"pre":a-=1;break;case"next":a+=1;break;default:break}var n=t.$store.state.navbarInfo.staffManagement.list[a];t.$refs.StaffDetailDialog.close(),t.clickCard(n)}},computed:{staffList:function(){return this.$store.state.navbarInfo.staffManagement.list},staffDetail:function(){return this.$store.state.navbarInfo.staffManagement.detail}}},N=L,P=(a("5860"),Object(h["a"])(N,r,s,!1,null,"070d01c8",null));t["default"]=P.exports},c740:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").findIndex,s=a("44d2"),i=a("ae40"),o="findIndex",l=!0,c=i(o);o in[]&&Array(1)[o]((function(){l=!1})),n({target:"Array",proto:!0,forced:l||!c},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s(o)},d28b:function(e,t,a){var n=a("746f");n("iterator")},e01a:function(e,t,a){"use strict";var n=a("23e7"),r=a("83ab"),s=a("da84"),i=a("5135"),o=a("861d"),l=a("9bf2").f,c=a("e893"),f=s.Symbol;if(r&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var u={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new f(e):void 0===e?f():f(e);return""===e&&(u[t]=!0),t};c(d,f);var m=d.prototype=f.prototype;m.constructor=d;var p=m.toString,_="Symbol(test)"==String(f("test")),g=/^Symbol\((.*)\)[^)]+$/;l(m,"description",{configurable:!0,get:function(){var e=o(this)?this.valueOf():this,t=p.call(e);if(i(u,e))return"";var a=_?t.slice(7,-1):t.replace(g,"$1");return""===a?void 0:a}}),n({global:!0,forced:!0},{Symbol:d})}},fb6a:function(e,t,a){"use strict";var n=a("23e7"),r=a("861d"),s=a("e8b5"),i=a("23cb"),o=a("50c4"),l=a("fc6a"),c=a("8418"),f=a("b622"),u=a("1dde"),d=a("ae40"),m=u("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),_=f("species"),g=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!m||!p},{slice:function(e,t){var a,n,f,u=l(this),d=o(u.length),m=i(e,d),p=i(void 0===t?d:t,d);if(s(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!s(a.prototype)?r(a)&&(a=a[_],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(u,m,p);for(n=new(void 0===a?Array:a)(h(p-m,0)),f=0;m<p;m++,f++)m in u&&c(n,f,u[m]);return n.length=f,n}})}}]);